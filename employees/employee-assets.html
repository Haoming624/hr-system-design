<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Employee Assets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/shared.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
</head>
<body>
  <div id="topbar"></div>
  <div id="sidebar"></div>
  <div class="main-content" style="padding-right: 1.5rem;">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <a href="employee-list.html" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Back to List</a>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addEmployeeModal"><i class="bi bi-plus"></i> Add New Employee</button>
    </div>
    <div class="card mb-4 shadow-sm border-0" style="background: linear-gradient(90deg, #e3f2fd 0%, #fff 100%);">
      <div class="card-body d-flex align-items-center">
        <div class="me-4 position-relative" style="width:64px;height:64px;">
          <div class="rounded-circle bg-primary d-flex justify-content-center align-items-center" style="width:64px;height:64px;font-size:2rem;color:#fff;">
            <i class="bi bi-person"></i>
          </div>
        </div>
        <div class="flex-grow-1">
          <h3 class="mb-0">Jane Doe <span class="badge bg-success ms-2">Active</span></h3>
          <div class="text-muted">HR Manager, Corporate Division</div>
        </div>
        <div class="text-end">
          <span class="badge bg-info text-dark">Staff ID: EMP00123</span>
        </div>
      </div>
    </div>
    <div id="employeeTabsContainer"></div>
    <div class="row g-4">
      <div class="col-lg-12">
        <!-- Assets Section -->
        <div class="card mb-3">
          <div class="card-header bg-success text-white fw-bold d-flex align-items-center justify-content-between" style="border-top-left-radius: 10px; border-top-right-radius: 10px;">
            <span><i class="bi bi-box-seam me-2"></i> Assets</span>
            <div class="d-flex align-items-center ms-auto gap-3">
              <span class="small text-white-50">Last Updated By: Jane Doe / 2023-01-01 09:00</span>
              <button class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#addAssetModal"><i class="bi bi-plus"></i> Add Asset</button>
            </div>
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-striped align-middle mb-0" id="assetsTable">
                <thead>
                  <tr>
                    <th>Asset Type</th>
                    <th>Description</th>
                    <th>Asset ID/Number</th>
                    <th>Issued Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="assetsTableBody">
                  <!-- Asset rows will be rendered by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- Add Asset Modal -->
        <div class="modal fade" id="addAssetModal" tabindex="-1" aria-labelledby="addAssetModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="addAssetModalLabel">Add Asset</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <form id="addAssetForm">
                <div class="modal-body">
                  <div class="mb-3"><label class="form-label">Asset Type</label><input type="text" class="form-control" name="type" required></div>
                  <div class="mb-3"><label class="form-label">Description</label><input type="text" class="form-control" name="description" required></div>
                  <div class="mb-3"><label class="form-label">Asset ID/Number</label><input type="text" class="form-control" name="id" required></div>
                  <div class="mb-3"><label class="form-label">Issued Date</label><input type="date" class="form-control" name="issued" required></div>
                  <div class="mb-3"><label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                      <option value="Active">Active</option>
                      <option value="Pending Return">Pending Return</option>
                      <option value="Returned">Returned</option>
                    </select>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                  <button type="submit" class="btn btn-success">Add Asset</button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- Edit Asset Modal -->
        <div class="modal fade" id="editAssetModal" tabindex="-1" aria-labelledby="editAssetModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-secondary text-white">
                <h5 class="modal-title" id="editAssetModalLabel">Edit Asset</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <form id="editAssetForm">
                <div class="modal-body">
                  <div class="mb-3"><label class="form-label">Asset Type</label><input type="text" class="form-control" name="type" required></div>
                  <div class="mb-3"><label class="form-label">Description</label><input type="text" class="form-control" name="description" required></div>
                  <div class="mb-3"><label class="form-label">Asset ID/Number</label><input type="text" class="form-control" name="id" required></div>
                  <div class="mb-3"><label class="form-label">Issued Date</label><input type="date" class="form-control" name="issued" required></div>
                  <div class="mb-3"><label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                      <option value="Active">Active</option>
                      <option value="Pending Return">Pending Return</option>
                      <option value="Returned">Returned</option>
                    </select>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                  <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- Delete Asset Modal -->
        <div class="modal fade" id="deleteAssetModal" tabindex="-1" aria-labelledby="deleteAssetModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="deleteAssetModalLabel">Delete Asset</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                Are you sure you want to delete this asset?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteAssetBtn">Delete</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../ui-highlighting.js"></script>
  <script>
    fetch('../includes/topbar.html').then(r => r.text()).then(html => document.getElementById('topbar').outerHTML = html);
    fetch('../includes/sidebar.html').then(r => r.text()).then(html => document.getElementById('sidebar').outerHTML = html);
    fetch('employee-tabs.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('employeeTabsContainer').outerHTML = html;
        if (typeof highlightEmployeeTab === 'function') highlightEmployeeTab();
      });

    // In-memory asset data for demo
    let assets = [
      { type: 'FOB', description: 'Building Access FOB', id: 'FOB-00123', issued: '2023-01-10', status: 'Active' },
      { type: 'Laptop', description: 'Dell Latitude 5420', id: 'LT-45678', issued: '2022-09-01', status: 'Pending Return' }
    ];
    let editIndex = null;
    let deleteIndex = null;

    function renderAssets() {
      const tbody = document.getElementById('assetsTableBody');
      tbody.innerHTML = '';
      assets.forEach((asset, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${asset.type}</td>
          <td>${asset.description}</td>
          <td>${asset.id}</td>
          <td>${asset.issued}</td>
          <td><span class="badge ${asset.status === 'Active' ? 'bg-success' : asset.status === 'Pending Return' ? 'bg-warning text-dark' : 'bg-secondary'}">${asset.status}</span></td>
          <td>
            <button class="btn btn-sm btn-secondary me-1" onclick="openEditAsset(${idx})">Edit</button>
            <button class="btn btn-sm btn-danger" onclick="openDeleteAsset(${idx})">Delete</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Add Asset
    document.getElementById('addAssetForm').onsubmit = function(e) {
      e.preventDefault();
      const form = e.target;
      assets.push({
        type: form.type.value,
        description: form.description.value,
        id: form.id.value,
        issued: form.issued.value,
        status: form.status.value
      });
      form.reset();
      renderAssets();
      bootstrap.Modal.getInstance(document.getElementById('addAssetModal')).hide();
    };

    // Edit Asset
    window.openEditAsset = function(idx) {
      editIndex = idx;
      const asset = assets[idx];
      const form = document.getElementById('editAssetForm');
      form.type.value = asset.type;
      form.description.value = asset.description;
      form.id.value = asset.id;
      form.issued.value = asset.issued;
      form.status.value = asset.status;
      bootstrap.Modal.getOrCreateInstance(document.getElementById('editAssetModal')).show();
    };
    document.getElementById('editAssetForm').onsubmit = function(e) {
      e.preventDefault();
      if (editIndex !== null) {
        const form = e.target;
        assets[editIndex] = {
          type: form.type.value,
          description: form.description.value,
          id: form.id.value,
          issued: form.issued.value,
          status: form.status.value
        };
        renderAssets();
        bootstrap.Modal.getInstance(document.getElementById('editAssetModal')).hide();
      }
    };

    // Delete Asset
    window.openDeleteAsset = function(idx) {
      deleteIndex = idx;
      bootstrap.Modal.getOrCreateInstance(document.getElementById('deleteAssetModal')).show();
    };
    document.getElementById('confirmDeleteAssetBtn').onclick = function() {
      if (deleteIndex !== null) {
        assets.splice(deleteIndex, 1);
        renderAssets();
        bootstrap.Modal.getInstance(document.getElementById('deleteAssetModal')).hide();
      }
    };

    // Initial render
    renderAssets();
  </script>
  <!-- Add Employee Modal (copied from employee-list.html) -->
  <div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="addEmployeeModalLabel">Add New Employee</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="addEmployeeForm">
          <div class="modal-body p-4">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">First Name</label>
                <input type="text" class="form-control" placeholder="Enter first name">
              </div>
              <div class="col-md-4">
                <label class="form-label">Middle Name</label>
                <input type="text" class="form-control" placeholder="Enter middle name">
              </div>
              <div class="col-md-4">
                <label class="form-label">Surname</label>
                <input type="text" class="form-control" placeholder="Enter surname">
              </div>
              <div class="col-md-4">
                <label class="form-label">Job Title</label>
                <select class="form-select">
                  <option value="">Select job title</option>
                  <option>HR Manager</option>
                  <option>Payroll Officer</option>
                  <option>IT Support Specialist</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label">Department</label>
                <select class="form-select">
                  <option value="">Select department</option>
                  <option>Human Resources</option>
                  <option>Finance</option>
                  <option>IT</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label">Group</label>
                <select class="form-select">
                  <option value="">Select group</option>
                  <option>Payroll Team</option>
                  <option>Recruitment Team</option>
                  <option>Support Team</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" placeholder="Enter email">
              </div>
              <div class="col-md-4">
                <label class="form-label">Status</label>
                <select class="form-select">
                  <option>Active</option>
                  <option>On Leave</option>
                  <option>Inactive</option>
                </select>
              </div>
            </div>
          </div>
          <div class="modal-footer border-0 pt-0">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Create Employee</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script>
    document.getElementById('addEmployeeForm').addEventListener('submit', function(e) {
      e.preventDefault();
      window.location.href = 'employee-profile.html';
    });
  </script>
</body>
</html> 